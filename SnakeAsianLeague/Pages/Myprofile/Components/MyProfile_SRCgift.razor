@using SnakeAsianLeague.Data.Entity.Commodity
@using SnakeAsianLeague.Data.Services
@using SnakeAsianLeague.Data.Services.Commodity

@inject AppState AppState
@inject CommodityServices CommodityServices


<head>
    <link href="css/MyProfile/SRCgift.css" rel="stylesheet" />   
    <link href="css/Inventory.css" rel="stylesheet" />   
    <link href="css/MarketPlace.css" rel="stylesheet" />   
</head>
<div class="Inventory">
        <div class="Secend-Block">
            <div class="Secend-Title" data-i18n="Inventory_data:otherTitle.Inventory">Inventory</div>
            <div class="Secend-Inner" id="">

                <NFT_Type />

            </div>
        </div>
                 
    <div class="Inventory-PPSR-Block" id="Inventory-PPSR-Block">  
    
        <div class="Inventory-CardBLock">  
            

            @if (IAPItemList != null)
            {

                @foreach (IAPItem item in IAPItemList)
                {

                    var SRCValue = @item.addValue + @item.addPlus;

                    <div class="NFTcard card-bg-DarkSeaGreen">  
                        <a class="NFTcardA" href="" >
                            @*<a href="@item.LinkURL" target="opensea">  </a>*@

                            <div class="NFTcard-inner">
                                <div class="NFT-cardImg">
                                    <img src= "@item.productUrl" alt="" >
                                </div>
                                <div class="NFT-cardText Not-Price-Ver">
                                    <div class="giftData-container"    >
                                        <div class="giftData-title">  </div>
                                        <div class="srcZone-container">
                                            <div class="giftData-srcZone">
                                                <img  class="srcZone-img" src="/images/Myprofile/SRC.webp"/>
                                                <span class="srcZone-num" > SRC @SRCValue</span>

                                                
                                            </div>
                                        </div>

                                        <div class="giftData-btn-container">

                                            <div class="usdValuation">  <span>≈USD</span> @item.priceUSD<span></span></div>
                                            <button class="giftData-btn"  onclick="BuyPurchase( @item.priceUSDT , @item.productID)" > 
                                                <span>USDT</span> <span class="giftData-btn-nun">@item.priceUSDT</span></button>

                                        </div>
                                    </div>

                                </div>               
                            </div>                     
                        </a>        
                    </div>
                }
            }
            @*<div class="NFTcard card-bg-red">  
                <a class="NFTcardA" href="" >
                    <div class="NFTcard-inner">
                        <div class="NFT-cardImg">
                            <img src="" alt="" >
                            <div class="NFTcard-remark tippy-pop" data-content="This PPSR is temporarily under maintenance." data-i18n="Inventory_data:NFTDetails.UnderMaintenance;[data-content]Inventory_data:NFTDetails.PPSRmaintenance">Under Maintenance</div>
                        </div>
                        <div class="NFT-cardText Not-Price-Ver">
                        </div>               
                    </div>                     
                </a>
            </div>*@
                       
       

     
            @*<div class="NFTcard card-bg-red">  
                <a class="NFTcardA" href="" >
                    <div class="NFTcard-inner">
                        <div class="NFT-cardImg">
                            <img src="" alt="" >
                            <div class="NFTcard-remark tippy-pop" data-content="This PPSR is temporarily under maintenance." data-i18n="Inventory_data:NFTDetails.UnderMaintenance;[data-content]Inventory_data:NFTDetails.PPSRmaintenance">Under Maintenance</div>
                        </div>
                        <div class="NFT-cardText Not-Price-Ver">
                        </div>               
                    </div>                     
                </a>        
            </div>*@

        </div>

    </div>


    </div>
@code {
    private List<IAPItem> IAPItemList;


    protected override async Task OnInitializedAsync()
    {
        IAPItemList = await CommodityServices.GetIAPItem();
    }


    public async Task BuyPurchase( decimal USDT,  string productID )
    {
       uint UserID = AppState.LoginStatus.userID;
       bool result = await CommodityServices.PurchaseByUSDT( UserID, USDT, productID);
    }
}
